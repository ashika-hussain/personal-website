---
import Layout from '../layouts/Layout.astro';
import About from '../components/About.astro';
import Card from '../components/Card.astro';
import Contact from '../components/Contact.astro';


interface MarkdownFrontmatter {
  date: number;
}

const allPosts = await Astro.glob<MarkdownFrontmatter>('../pages/posts/*.md');
const sortedPosts = allPosts.sort((a, b) => new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf());

---
<Layout>
  <About></About>
  <h2>Blog</h2>
      <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 py-8" data-test="articles-section">
        {sortedPosts.map(p => <div class="col-span-1">
          <Card post={p} />
        </div>)}
      </section>
  <Contact></Contact>
</Layout>